# 1.1.2 íŒ©í† ë¦¬íŒ¨í„´(factory pattern)

ê°ì²´ ì§€í–¥ ë””ìì¸ íŒ¨í„´ìœ¼ë¡œ, ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ë”°ë¡œ ë‘ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.
<br/>

### | í™œìš©

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ê°„ë‹¨í•˜ê²Œ `new Object()`ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

<b>_(EX1) ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ íŒ©í† ë¦¬ íŒ¨í„´_</b>

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ìˆ«ìë¥¼ ì „ë‹¬í•˜ê±°ë‚˜ ë¬¸ìì—´ì„ ì „ë‹¬í•¨ì— ë”°ë¼ ë‹¤ë¥¸ íƒ€ì…ì˜ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.

ì¦‰, ì „ë‹¬ë°›ì€ ê°’ì— ë”°ë¼ ë‹¤ë¥¸ ê°ì²´ë¥¼ ìƒì„±í•˜ë©° ì¸ìŠ¤í„´ìŠ¤ì˜ íƒ€ì… ë“±ì„ ì •í•œë‹¤.

```js
const num = new Object(12);
const str = new Object("abc");

console.log(num.constructor.name); // Number
console.log(str.constructor.name); // String
```

ì»¤í”¼ íŒ©í† ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¼ë–¼ì™€ ì—ìŠ¤í”„ë ˆì†Œë¥¼ ìƒì‚°í•˜ëŠ” ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```js
class Latte {
  constructor() {
    this.name = "latte";
  }
}
class Espresso {
  constructor() {
    this.name = "espresso";
  }
}
class LatteFactory {
  static createCoffee() {
    return new Latte();
  }
}
class EspressoFactory {
  static createCoffee() {
    return new Espresso();
  }
}

const factoryList = { LatteFactory, EspressoFactory };
class CoffeeFactory {
  static createCoffee(type) {
    const factory = factoryList[type];
    return factory.createCoffee();
  }
}
const main = () => {
  // ë¼ë–¼ ì»¤í”¼ë¥¼ ì£¼ë¬¸í•œë‹¤.
  const coffee = CoffeeFactory.createCoffee("LatteFactory");
  // ì»¤í”¼ ì´ë¦„ì„ ë¶€ë¥¸ë‹¤.
  console.log(`ì£¼ë¬¸í•˜ì‹  ${coffee.name} ë‚˜ì™”ìŠµë‹ˆë‹¤.`);
};
main(); // ì£¼ë¬¸í•˜ì‹  latte ë‚˜ì™”ìŠµë‹ˆë‹¤.
```

CoffeeFactoryë¼ëŠ” ìƒìœ„ í´ë˜ìŠ¤ê°€ ì¤‘ìš”í•œ ë¼ˆëŒ€ë¥¼ ê²°ì •í•˜ê³ , í•˜ìœ„ í´ë˜ìŠ¤ì¸ LatteFactoryê°€ êµ¬ì²´ì ì¸ ë‚´ìš©ì„ ê²°ì •í•œë‹¤.

ì´ëŠ” ì˜ì¡´ì„± ì£¼ì…ì´ë¼ê³  ë³¼ ìˆ˜ ìˆëŠ”ë°, CoffeeFactoryì—ì„œ LatteFactoryì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ LatteFactoryì—ì„œ ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ CoffeeFactoryì— ì£¼ì…í•˜ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.

<br />
ë˜í•œ ê° Factory í´ë˜ìŠ¤ë“¤ì—ì„œëŠ” static í‚¤ì›Œë“œë¥¼ í†µí•´ createCoffee() ë©”ì„œë“œë¥¼ ì •ì ìœ¼ë¡œ ì„ ì–¸í•˜ê³  ìˆë‹¤.

ì´ë ‡ê²Œ ì •ì  ë©”ì„œë“œë¡œ ì •ì˜í•˜ë©´ í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê°ì²´ë¥¼ ë§Œë“¤ì§€ ì•Šê³ ë„ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë©°, í•´ë‹¹ ë©”ì„œë“œì— ëŒ€í•œ ë©”ëª¨ë¦¬ í• ë‹¹ì„ í•œ ë²ˆë§Œ í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì„ ê°–ëŠ”ë‹¤.

<b>_(EX2) ìë°”ì˜ íŒ©í† ë¦¬ íŒ¨í„´_</b>

ìœ„ì˜ ì˜ˆì œë¥¼ ìë°”ë¡œ êµ¬í˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```java
abstract class Coffee {
    public abstract int getPrice();

    @Override
    public String toString() {
        return "ì£¼ë¬¸í•˜ì‹  ì»¤í”¼ëŠ” " + this.getPrice() + "ì› ì…ë‹ˆë‹¤.";
    }
}

class CoffeeFactory {
    public static Coffee getCoffee(String type, int price) {
        // Enum í˜¹ì€ MAp ì„ ì´ìš©í•˜ì—¬ if ë¬¸ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë§¤í•‘í•  ìˆ˜ë„ ìˆë‹¤.
        if ("Latte".equalsIgnoreCase(type)) return new Latte(price);
        else if ("Espresso".equalsIgnoreCase(type)) return new Espresso(price);
        else {return new DefaultCoffee(); }
    }
}

class DefaultCoffee extends Coffee {
    private int price;

    public DefaultCoffee() {
        this.price = -1;
    }

    @Override
    public int getPrice() {
        return this.price;
    }
}

class Latte extends Coffee {
    private int price;

    public Latte(int price) {
        this.price = price;
    }

    @Override
    public int getPrice() {
        return this.price;
    }
}

class Espresso extends Coffee {
    private int price;

    public Espresso(int price) {
        this.price = price;
    }

    @Override
    public int getPrice() {
        return this.price;
    }
}

public class Main {
    public static void main(String[] args) {
        Coffee latte = CoffeeFactory.getCoffee("Latte", 4000);
        Coffee espresso = CoffeeFactory.getCoffee("Espresso", 2000);
        System.out.println("PICK UP :: " + latte);  // PICK UP :: ì£¼ë¬¸í•˜ì‹  ì»¤í”¼ëŠ” 4000ì› ì…ë‹ˆë‹¤.
        System.out.println("PICK UP ::" + espresso); // PICK UP ::ì£¼ë¬¸í•˜ì‹  ì»¤í”¼ëŠ” 2000ì› ì…ë‹ˆë‹¤.
    }
}
```

```
ğŸ¥¸ Enum íƒ€ì…ì´ë€ ?
ìƒìˆ˜ì˜ ì§‘í•©ì„ ì •ì˜í•  ë•Œ ì‚¬ìš©ë˜ëŠ” íƒ€ì…ì´ë‹¤.
Enumì„ ê¸°ë°˜ìœ¼ë¡œ ìƒìˆ˜ ì§‘í•©ì„ ê´€ë¦¬í•˜ë©´ ì½”ë“œë¥¼ ë¦¬íŒ©í„°ë§ í•  ë•Œ ìƒìˆ˜ ì§‘í•©ì— ëŒ€í•œ ë¡œì§ ìˆ˜ì • ì‹œ, í•´ë‹¹ ë¶€ë¶„ë§Œ ìˆ˜ì •í•˜ë©´ ë˜ëŠ” ì¥ì ì´ ìˆê³ ,
ë³¸ì§ˆì ìœ¼ë¡œ ìŠ¤ë ˆë“œì„¸ì´í”„(thread safe) í•˜ê¸° ë•Œë¬¸ì— ì‹±ê¸€í†¤ íŒ¨í„´ì„ ë§Œë“¤ë•Œ ë„ì›€ì´ ëœë‹¤.
```
