# 1.1.5 프록시 패턴(proxy pattern)과 프록시 서버

프록시 패턴은 대상 객체(subject)에 접근하기 전, 그 접근에 대한 흐름을 가로채 대상 객체 앞단의 인터페이스 역할을 하는 디자인 패턴이다.

이를 통해 객체의 속성, 변환 등을 보완하며 보안, 데이터 검증, 캐싱, 로깅에 사용한다.

### 프록시 서버(Proxy server)

프록시 서버는 서버와 클라이언트 사이에서 클라이언트가 자신을 통해 다른 네트워크 서비스에 간접적으로 접속할 수 있게 해주는 컴퓨터 시스템이나 응용 프로그램이다.

<b> _프록시 서버에서의 캐싱_ </b>

캐시 안에 정보를 담아두고, 캐시 안에 있는 정보를 요구하는 요청에 대하여 다시 저 멀리 있는 원격 서버에 요청하지 않고, 캐시 안에 있는 데이터를 활용하는 것을 말한다.

이를 통해 불필요하게 외부와 연결하지 않기 때문에 트래픽을 줄일 수 있다.

<b> | 활용 </b>

<b> _(EX1) 프록시 서버로 쓰이는 nginx_ </b>

`nginx`는 비동기 이벤트 기반의 구조와 다수의 연결을 효과적으로 처리 가능한 웹 서버이며, 주로 Node.js 서버 앞단의 프록시 서버로 활용된다.

클라이언트로부터 요청을 받았을 때 그에 맞는 정적 파일을 응답해주는 HTTP Web Server로 활용되기도 하고, 또는 Reverse Proxy Server로 활용하여 WAS의 부하를 줄일 수 있는 로드밸러서 역할을 한다. 또한 익명의 사용자가 직접적으로 서버에 접근하는 것을 차단하여 보안을 강화할 수 도 있다.

<b> _(EX2) 프록시 서버로 쓰이는 cloudFlare_ </b>

`CloudFlare`는 웹 서버 앞단에 프록시 서버로 두어 의심스러운 트래픽을 차단하여 DDOS 공격을 방어하거나, 별도의 인증서 설치 없이 HTTPS를 구축하는데 사용된다.

```
🥸 DDOS 공격 이란 ?
DDOS란 짧은 기간 동안 많은 요청을 보내 네트워크를 마비시켜 웹 사이트의 가용성을 방해하는 사이버 공격이다.
```

```
🥸 CDN(Content Delivery Network) 이란 ?
각 사용자가 인터넷에 접속하는 곳과 가까운 곳에서 콘텐츠를 캐싱 또는 배포하는 서버 네트워크이다.
이를 통해 사용자가 웹 서버로부터 콘텐츠를 다운로드하는 시간을 줄일 수 있다.
```

<b> _(EX3) CORS와 프론트엔드의 프록시 서버_ </b>

CORS(Cross-Origin Resource Sharing)는 서버가 웹 브라우저에서 리소스를 로드할 때 다른 출처을 통해 로드하지 못하게 하는 HTTP 헤더 기반 메커니즘이다.

두 개의 출처가 서로 같다고 판단되려면 두 URL의 요소 중 `Scheme`(HTTPS or HTTP), `Host`(naver.com), `Port`(:80)가 같아야 한다.

예컨대, 프론트엔드에서는 127.0.0.1:3000으로 테스팅하고, 백엔드 서버는 127.0.0.1:8080이라면 포트번호가 다르기 때문에 CORS 에러가 난다. 이때 프록시 서버를 두어 프론트엔드에서 요청되는 오리진을 127.0.0.1:8080으로 바꿀 수 있다.

더 읽어보기 &rarr; [CORS는\_왜\_이렇게\_우리를\_힘들게\_하는걸까?](https://evan-moon.github.io/2020/05/21/about-cors/)
