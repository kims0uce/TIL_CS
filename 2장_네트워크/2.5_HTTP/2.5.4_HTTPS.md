# 2.5.4 HTTPS (hypertext transfer protocol secure)

### | HTTPS λ€ ?

HTTPSλ” μ›ΉλΈλΌμ°μ €μ™€ μ›Ή μ‚¬μ΄νΈ κ°„μ— λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ”λ° μ‚¬μ©λλ” κΈ°λ³Έ ν”„λ΅ν† μ½μΈ HTTPμ λ³΄μ• λ²„μ „μ΄λ‹¤.

HTTPSλ” λ°μ΄ν„° μ „μ†΅μ λ³΄μ•μ„ κ°•ν™”ν•κΈ° μ„ν•΄ μ•”νΈν™”λλ‹¤.

μ΄κ²ƒμ€ μ‚¬μ©μκ°€ μ€ν–‰κ³„μΆ, μ΄λ©”μΌ μ„λΉ„μ¤, κ±΄κ°•λ³΄ν— μ κ³µμμ— λ΅κ·ΈμΈν•λ” κ²ƒ κ³Ό κ°™μ΄ λ―Όκ°ν• λ°μ΄ν„°λ¥Ό μ „μ†΅ν•  λ• νΉν μ¤‘μ”ν•λ‹¤.

λ¨λ“  μ›Ήμ‚¬μ΄νΈ, νΉν λ΅κ·ΈμΈ μκ²© μ¦λ…μ΄ ν•„μ”ν• μ›Ήμ‚¬μ΄νΈλ” HTTPSλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.

<img src="../../assets/2.5.4/https.png" width="600px" height="300px">

### | HTTPSμ λ™μ‘λ°©μ‹

μ•”νΈν™” ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•μ—¬ ν†µμ‹ μ„ μ•”νΈν™” ν•λ‹¤. μ΄ ν”„λ΅ν† μ½μ€ μ΄μ „μ—λ” `SSL`λ΅ μ•λ ¤μ Έ μμ—μ§€λ§, `TLS`λΌκ³ λ„ ν•λ‹¤.

μ΄ ν”„λ΅ν† μ½μ€ λΉ„λ€μΉ­ κ³µκ° ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ ν†µμ‹ μ„ λ³΄νΈν•λ”λ°, ν•΄λ‹Ή μ ν•μ λ³΄μ• μ‹μ¤ν…μ€ λ‘ λ‹Ήμ‚¬μ κ°„μ ν†µμ‹ μ„ μ•”νΈν™” ν•κΈ° μ„ν•΄ λ‘ κ°μ μ„λ΅ λ‹¤λ¥Έ ν‚¤λ¥Ό μ‚¬μ©ν•λ‹¤.

<img src="../../assets/2.5.4/raon.png" width="500px" height="300px">

<b> _κ°μΈν‚¤_ </b>

μ΄ ν‚¤λ” μ›Ήμ‚¬μ΄νΈ μ†μ μκ°€ μ μ–΄ν•λ©°, λΉ„κ³µκ°λ΅ μ μ§€λλ‹¤.

μ¦‰ μ›Ήμ„λ²„μ— μμΌλ©° κ³µκ°ν‚¤λ΅ μ•”νΈν™”λ μ •λ³΄λ¥Ό ν•΄λ…ν•λ”λ° μ‚¬μ©λλ‹¤.

<b> _κ³µκ°ν‚¤_ </b>

μ΄ ν‚¤λ” μ•μ „ν• λ°©μ‹μΌλ΅ μ„λ²„μ™€ μƒνΈμ‘μ©ν•λ ¤λ” λ¨λ“  μ‚¬λμ΄ μ‚¬μ©ν•  μ μλ‹¤.

κ³µκ°ν‚¤λ΅λ§ μ•”νΈν™”λ μ •λ³΄λ” κ°μΈν‚¤λ΅ ν•΄λ…ν•  μ μλ‹¤.

### | HTTPSμ μ¤‘μ”μ„±

νΈλν”½μ„ μ•”νΈν™”ν•μ—¬ ν¨ν‚·μ΄ μ¤λ‹ν•‘λκ±°λ‚, λ‹¤λ¥Έ λ°©μ‹μΌλ΅ κ°€λ΅μ±„λ”λΌλ„ λ¬΄μλ―Έν• λ¬Έμλ΅ μΈμ‹λλ„λ΅ ν•μ—¬ λ³΄μ•κ³Ό μ‹ λΆ°μ„±μ„ μ μ§€ν•κΈ° μ„ν•΄ ν•„μ”ν•λ‹¤.

### | HTTPμ™€μ μ°¨μ΄

80λ² ν¬νΈλ¥Ό μ‚¬μ©ν•λ” HTTPμ™€λ” λ‹¬λ¦¬, HTTPSλ” 443λ² ν¬νΈλ¥Ό μ‚¬μ©ν•λ‹¤.

μ΄ μ™Έμ— κΈ°μ μ μΌλ΅ λ³΄μ•μ„ λ•, λ³„κ°μ ν”„λ΅ν† μ½μ΄λΌκ³  ν•  μ μ—†λ‹¤.

HTTPSλ” HTTP ν”„λ΅ν† μ½μ„ ν†µν•΄ TLS/SSL μ•”νΈν™”λ¥Ό ν• κ²ƒ λΏμ΄λ‹¤.

---

### | SSL(secure socket layer) μ΄λ€ ?

<b> _κ°μ”_ </b>

μΌλ°μ μΌλ΅ TLSλΌκ³  λ¶λ¦¬λ” SSLμ€ μΈν„°λ„· νΈλν”½μ„ μ•”νΈν™”ν•κ³ , μ„λ²„ μ‹ μ›μ„ ν™•μΈν•κΈ° μ„ν• ν”„λ΅ν† μ½μ΄λ‹¤.

μ›Ή μ‚¬μ΄νΈκ°€ HTTPμ—μ„ λ³΄λ‹¤ μ•μ „ν• HTTPSλ΅ μ΄λ™ν•  μ μκ² ν•΄μ£Όλ” κ²ƒμ΄λ‹¤.

μ΄λ¬ν• SSLμ€ μΆ…μΆ… λ””μ§€ν„Έ μΈμ¦μ„λΌκ³ λ„ λ¶λ¦¬λ©°, λΈλΌμ°μ €μ™€ μ„λ²„ μ‚¬μ΄μ μ•”νΈν™”λ μ—°κ²°μ„ μλ¦½ν•λ”λ° μ‚¬μ©ν•λ‹¤.

SSL μΈμ¦μ„λ” μ›Ή μ‚¬μ΄νΈμ μ›λ³Έ μ„λ²„μ—μ„ νΈμ¤ν…λλ” λ°μ΄ν„° νμΌλ΅, λ‹¤μκ³Ό κ°™μ€ λ‚΄μ©μ„ ν¬ν•¨ν•λ‹¤.

- μΈμ¦μ„κ°€ λ°κΈ‰λ λ€μƒ λ„λ©”μΈ μ΄λ¦„
- λ°κΈ‰λ°›μ€ μ‚¬λ, μ΅°μ§, μ¥μΉ
- λ°κΈ‰ν• μΈμ¦ κΈ°κ΄€
- μΈμ¦ κΈ°κ΄€μ λ””μ§€ν„Έ μ„λ…
- κ΄€λ ¨ ν•μ„ λ„λ©”μΈ
- μΈμ¦μ„ λ°κΈ‰ λ‚ μ§
- μΈμ¦μ„ λ§λ£ λ‚ μ§
- κ³µκ°ν‚¤(κ°μΈν‚¤λ” λΉ„λ°€λ΅ μ μ§€λ¨)

<br />

<b> _μ›Ή μ‚¬μ΄νΈμ—μ„ SSL μΈμ¦μ„κ°€ ν•„μ”ν• μ΄μ _ </b>

μ‚¬μ©μ λ°μ΄ν„°λ¥Ό μ•μ „ν•κ² μ μ§€ν•κ³ , μ›Ή μ‚¬μ΄νΈμ μ†μ κ¶μ„ ν™•μΈν•λ©°, κ³µκ²©μκ°€ μ‚¬μ΄νΈμ κ°€μ§ λ²„μ „μ„ λ§λ“λ” κ²ƒμ„ λ°©μ§€ν•μ—¬ `μ‚¬μ©μμ μ‹ λΆ°λ¥Ό μ–»κΈ° μ„ν•¨` μ΄λ‹¤.

- `μ•”νΈν™”` κ΄€μ  : SSL μΈμ¦μ„κ°€ μ§€μ›ν•λ” κ³µκ°-κ°μΈν‚¤ νμ–΄λ§μ„ ν†µν•΄ SSL/TLS μ•”νΈν™”κ°€ κ°€λ¥ν•λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ SSL μΈμ¦μ„μ—μ„ TLS μ—°κ²°μ„ μ—¬λ”λ° ν•„μ”ν• κ³µκ°ν‚¤λ¥Ό λ°›λ”λ‹¤.
- `μΈμ¦` κ΄€μ  : SSL μΈμ¦μ„λ” ν΄λΌμ΄μ–ΈνΈκ°€ μ‹¤μ λ΅ λ„λ©”μΈμ„ μ†μ ν•κ³  μλ” μ¬λ°”λ¥Έ μ„λ²„μ™€ ν†µμ‹ ν•κ³  μλ”μ§€ ν™•μΈν•λ‹¤. μ΄λ¥Ό ν†µν•΄ μ¤ν‘Έν•‘λ“±μ κ³µκ²©μ„ λ°©μ§€ν•  μ μλ‹¤.
- `HTTPS` κ΄€μ  : μ „μ†΅ μ¤‘μΈ μ‚¬μ©μμ λ°μ΄ν„°λ¥Ό λ³΄νΈν•κ³ , μ‚¬μ©μ κ΄€μ μ—μ„ μ‚¬μ΄νΈλ¥Ό λ”μ± μ‹ λΆ°ν•  μ μκ² ν•λ‹¤.

```
π¥Έ μ¤ν‘Έν•‘(spoofing) μ΄λ€ ?
μΉμΈλ°›μ€ μ‚¬μ©μμΈκ²ƒμ²λΌ μ‹μ¤ν…μ— μ ‘κ·Όν•κ±°λ‚, λ„¤νΈμ›ν¬μƒμ—μ„ ν—κ°€λ μ£Όμ†λ΅ κ°€μ¥ν•μ—¬ μ ‘κ·Ό μ μ–΄λ¥Ό μ°νν•λ” κ³µκ²© ν–‰μ„μ΄λ‹¤.
```

<br />

<b> _μ›Ή μ‚¬μ΄νΈμ—μ„ SSL μΈμ¦μ„λ¥Ό λ°›λ” λ°©λ²•_ </b>

μΈμ¦ λ©”μ»¤λ‹μ¦μ€ CA(Certificate Authorities)μ—μ„ λ°κΈ‰ν• μΈμ¦μ„λ¥Ό κΈ°λ°μΌλ΅ μ΄λ£¨μ–΄μ§„λ‹¤.

CAμ—μ„ λ°κΈ‰ν• μΈμ¦μ„λ” μ•μ „ν• μ—°κ²°μ„ μ‹μ‘ν•λ”λ° μμ–΄ ν•„μ”ν• `κ³µκ°ν‚¤`λ¥Ό ν΄λΌμ΄μ–ΈνΈμ— μ κ³µν•κ³ , μ‚¬μ©μκ°€ μ ‘μ†ν• μ„λ²„κ°€ `μ‹ λΆ°ν•  μ μλ” μ„λ²„`μ„μ„ λ³΄μ¥ν•λ‹¤.

μΈμ¦μ„λ” μ„λΉ„μ¤μ •λ³΄, κ³µκ°ν‚¤, μ§€λ¬Έ, λ””μ§€ν„Έμ„λ… λ“±μΌλ΅ μ΄λ£¨μ–΄μ Έ μλ‹¤.

λ§μ•½ μμ‹ μ μ„λΉ„μ¤μ— λ€ν• CA μΈμ¦μ„λ¥Ό λ°κΈ‰λ°›κ³  μ‹¶λ‹¤λ©΄, μ‚¬μ΄νΈ μ •λ³΄μ™€ κ³µκ°ν‚¤λ¥Ό CAμ— μ μ¶ν•΄μ•Ό ν•λ‹¤. μ΄ν›„ CAλ” λΉ„λ°€ν‚¤ λ“±μ„ κΈ°λ°μΌλ΅ μΈμ¦μ„λ¥Ό λ°κΈ‰ν•΄μ¤„ κ²ƒμ΄λ‹¤.

### | TLS(μ „μ†΅κ³„μΈµλ³΄μ•; transport layer security) λ€ ?

HTTPSμ—μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°„ ν†µμ‹  μ „ SSL μΈμ¦μ„λ΅ μ‹ λΆ°μ„± μ—¬λ¶€λ¥Ό νλ‹¨ν•κΈ° μ„ν•΄ μ—°κ²°ν•λ” λ°©μ‹μ΄λ‹¤.

μ΄λ” μ „μ†΅κ³„μΈµμ—μ„ λ³΄μ•μ„ μ κ³µν•λ” ν”„λ΅ν† μ½λ΅, SSLμ ν–¥μƒλ-λ”μ± μ•μ „ν• λ²„μ „μ΄λ‹¤.

### | TLS/SSL

μ¦‰, ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ ν†µμ‹ ν•  λ• SSL/TLSλ¥Ό ν†µν•΄ μ 3μκ°€ λ©”μ‹μ§€λ¥Ό λ„μ²­ν•κ±°λ‚ λ³€μ΅°ν•μ§€ λ»ν•λ„λ΅ ν•λ‹¤.

SSL/TLSλ” λ³΄μ• μ„Έμ…μ„ κΈ°λ°μΌλ΅ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•λ©°, λ³΄μ• μ„Έμ…μ΄ λ§λ“¤μ–΄μ§ λ• μΈμ¦ λ©”μ»¤λ‹μ¦/ν‚¤ κµν™ μ•”νΈν™” μ•κ³ λ¦¬μ¦/ν•΄μ‹± μ•κ³ λ¦¬μ¦μ΄ μ‚¬μ©λλ‹¤.

<b> _λ³΄μ•μ„Έμ… μ΄λ€ ?_ </b>

λ³΄μ•μ΄ μ‹μ‘λκ³  λλ‚λ” λ™μ• μ μ§€λλ” μ„Έμ…μ„ κ°€λ¦¬ν‚¨λ‹¤.

SSL/TLS μ€ ν•Έλ“μ…°μ΄ν¬λ¥Ό ν†µν•΄ λ³΄μ• μ„Έμ…μ„ μƒμ„±ν•κ³  μ΄λ¥Ό κΈ°λ°μΌλ΅ μƒνƒ μ •λ³΄λ¥Ό κ³µμ ν•λ‹¤.

<b> _TLS handshake_ </b>

μ‚¬μ©μκ°€ μ›Ήνμ΄μ§€μ— μ—°κ²°ν•λ©΄ μ›Ήνμ΄μ§€λ” λ³΄μ• μ„Έμ…μ„ μ‹μ‘ν•λ”λ° ν•„μ”ν• κ³µκ°ν‚¤κ°€ ν¬ν•¨λ SSL μΈμ¦μ„λ¥Ό μ „μ†΅ν•λ‹¤. λ‘ λ€μ μ»΄ν“¨ν„°μΈ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” λ³΄μ• μ—°κ²°μ„ μ„¤μ •ν•λ”λ° μ‚¬μ©λλ” μ „ν›„ ν†µμ‹ μΈ SSL/TLS ν•Έλ“μ…°μ΄ν¬λΌλ” ν”„λ΅μ„Έμ¤λ¥Ό κ±°μΉλ‹¤.

<img src="../../assets/2.5.4/tls.png" width="400px" heigth="300px">

TLS ν•Έλ“μ…°μ΄ν¬λ” TCP ν•Έλ“μ…°μ΄ν¬λ¥Ό ν†µν•΄ TCP μ—°κ²°μ΄ μ—΄λ¦° ν›„μ— λ°μƒν•λ‹¤.

κ·Έ κ³Όμ • μ¤‘ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” λ‹¤μμ„ μν–‰ν•λ‹¤.

1. `"client hello" λ©”μ‹μ§€` : ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ— "hello" λ©”μ‹μ§€λ¥Ό λ³΄λƒ„μΌλ΅μ¨ ν•Έλ“μ…°μ΄ν¬λ¥Ό μ‹μ‘ν•λ‹¤. ν•΄λ‹Ή λ©”μ‹μ§€μ—λ” ν΄λΌμ΄μ–ΈνΈκ°€ μ§€μ›ν•λ” TLS λ²„μ „, μ§€μ›λλ” μ•”νΈν™” μ ν’κµ° λ“±μ΄ ν¬ν•¨λλ‹¤.

2. `"server hello" λ©”μ‹μ§€` : ν΄λΌμ΄μ–ΈνΈ hello λ©”μ‹μ§€μ— λ€ν• μ‘λ‹µμΌλ΅ μ„λ²„λ” μ„λ²„μ SSL μΈμ¦μ„, μ„λ²„κ°€ μ„ νƒν• μ•”νΈν™” μ ν’κµ° λ“±μ„ ν¬ν•¨ν•λ” λ©”μ‹μ§€λ¥Ό λ³΄λ‚Έλ‹¤.

3. `μΈμ¦` : ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ SSL μΈμ¦μ„λ¥Ό λ°κΈ‰ν• μΈμ¦ κΈ°κ΄€μ—μ„ 'μ„λ²„κ°€ λ„κµ¬μΈμ§€'λ¥Ό ν™•μΈν•κ³ , ν΄λΌμ΄μ–ΈνΈκ°€ λ„λ©”μΈμ μ‹¤μ  μ†μ μμ™€ μƒνΈμ‘μ©ν•κ³ μμμ„ ν™•μΈν•λ‹¤.

4. `ν”„λ¦¬λ§μ¤ν„° μ‹ν¬λ¦Ώ` : ν΄λΌμ΄μ–ΈνΈλ” μ„μμ λ°”μ΄νΈ λ¬Έμμ—΄μΈ "ν”„λ¦¬λ§μ¤ν„° μ‹ν¬λ¦Ώ"μ„ ν•λ‚ λ” λ³΄λ‚Έλ‹¤. premaster secretμ€ κ³µκ°ν‚¤λ΅ μ•”νΈν™”λλ©°, μ„λ²„μ—μ„ κ°μΈν‚¤λ΅ λ³µνΈν™” ν•  μ μλ‹¤.
   (μ΄λ• ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ SSL μΈμ¦μ„μ—μ„ κ³µκ°ν‚¤λ¥Ό μ–»μ)

5. `μ‚¬μ©λ κ°μΈν‚¤` : μ„λ²„κ°€ premaster secretμ„ ν•΄λ…ν•λ‹¤.

6. `μƒμ„±λ μ„Έμ…ν‚¤` : ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ λ¨λ‘ ν΄λΌμ΄μ–ΈνΈμ„μ / μ„λ²„μ„μ / ν”„λ¦¬λ§μ¤ν„°μ‹ν¬λ¦Ώ μ—μ„ μ„Έμ…ν‚¤λ¥Ό μƒμ„±ν•λ‹¤. μ΄λ• λ¨λ‘κ°€ λ™μΌν• κ²°κ³Όμ— λ„λ‹¬ν•΄μ•Ό ν•λ‹¤.

7. `ν΄λΌμ΄μ–ΈνΈκ°€ μ¤€λΉ„λ¨` : ν΄λΌμ΄μ–ΈνΈκ°€ μ„Έμ… ν‚¤λ΅ μ•”νΈν™”λ "μ™„λ£" λ©”μ‹μ§€λ¥Ό λ³΄λ‚Έλ‹¤.

8. `μ„λ²„ μ¤€λΉ„λ¨` : μ„λ²„κ°€ μ„Έμ…ν‚¤λ΅ μ•”νΈν™”λ "μ™„λ£" λ©”μ‹μ§€λ¥Ό λ³΄λ‚Έλ‹¤.

9. `λ³΄μ• λ€μΉ­ μ•”νΈν™” λ‹¬μ„±` : ν•Έλ“μ…°μ΄ν¬κ°€ μ™„λ£λκ³  μ„Έμ…ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ ν†µμ‹ μ΄ κ³„μ†λλ‹¤.

ν•νΈ, λ””ν”Ό-ν—¬λ§ ν•Έλ“μ…°μ΄ν¬λ” κ°μΈν‚¤λ¥Ό μ‚¬μ©ν•μ§€ μ•κ³  μ„Έμ…ν‚¤λ¥Ό μƒμ„±ν•λ‹¤.

4.λ²μ—μ„μ™€ κ°™μ΄ ν΄λΌμ΄μ–ΈνΈκ°€ ν”„λ¦¬λ§μ¤ν„° μ‹ν¬λ¦Ώμ„ μƒμ„±ν•μ—¬ μ„λ²„λ΅ λ³΄λ‚΄μ§€ μ•κ³ , ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” κµν™ν• DH λ§¤κ°λ³€μλ¥Ό μ‚¬μ©ν•μ—¬ μΌμΉν•λ” ν”„λ¦¬λ§μ¤ν„° μ‹ν¬λ¦Ώμ„ κ°λ³„μ μΌλ΅ κ³„μ‚°ν•λ” κ²ƒμ΄λ‹¤.
