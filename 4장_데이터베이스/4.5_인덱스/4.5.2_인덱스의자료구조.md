# 4.5.2 인덱스의 자료구조

인덱스는 대표적으로 해시테이블과 B+tree로 구현한다. 

### Hash Table 

(key, value) 한 쌍으로 데이터를 저장하는 자료구조이다. 

key를 이용하여 대응되는 value값을 구하며, 평균적으로 O(1) 이라는 시간만에 데이터를 탐색할 수 있다. 

해시테이블을 이용한다면 인덱스는 (key, value) = (컬럼의 값, 데이터의 위치)로 구현하는데 이는 실제로 인덱스에서 잘 쓰이지는 않는다. 

DB에서는 부등호 연산이 자주 사용되는데, 해시 테이블은 등호 연산에 최적화되어 있으며 정렬되어 있지도 않다. 


<br />

### B-tree

B-tree란, 자식 2개 만을 갖는 이진 트리를 확장하여 N개의 자식을 가질 수 있도록 고안된 자료구조이다. 

또한 좌우 자식 간의 균형이 맞지 않을 경우 비효율적이므로, 항상 균형을 맞춘다는 의미에서 균형트리(balance tree) 라고도 불린다.

최상단에는 하나의 노드만 존재하는데, 이를 RootNode라 한다. 중간노드를 BranchNode, 최하위 노드를 LeafNode 라고 한다. 

<img src="../../assets/4.5.2/btree.jpg" width="500px" height="200px">


트리 탐색은 맨 위의 루트노드부터 이루어지며, 브랜치노드를 거쳐 리프노드까지 내려온다. 

이후 찾는 바로 그 값을 가리키는 데이터 포인터를 통해 결과값을 반환하게 된다. 

> 67을 찾아보자.      
> 67은 30보다 크고 70보다 작으므로 가운데 브랜치노드로 내려온다.     
> 67은 50보다 크므로 세번째 리프노드로 내려온다.      
> 30, 50, 70 과 같이 정렬된 값을 기반으로 탐색한다.      

<br />

> 대수확장성은.. 이 책에서만 쓰이는 용어 같아요... ? 

